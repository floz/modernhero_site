var Contact,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Contact = (function() {
  Contact.prototype._$base = null;

  Contact.prototype._$main = null;

  Contact.prototype._$btClose = null;

  Contact.prototype._opened = false;

  function Contact() {
    this._onHideComplete = __bind(this._onHideComplete, this);
    this._closeClickHandler = __bind(this._closeClickHandler, this);
    this._$base = $("#contact");
    this._$main = $("#main");
    this._$btClose = $("#bt_close_contact");
    TweenLite.set(this._$base, {
      autoAlpha: 0,
      y: 70
    });
  }

  Contact.prototype.show = function() {
    if (this._opened) {
      return;
    }
    this._opened = true;
    this._$base.css("display", "block");
    TweenLite.set(this._$base, {
      autoAlpha: .8
    });
    TweenLite.to(this._$base, .8, {
      autoAlpha: 1,
      y: 0,
      ease: Cubic.easeOut
    });
    TweenLite.to(this._$main, .7, {
      bottom: "105px",
      delay: .05,
      ease: Cubic.easeOut
    });
    return this._$btClose.click(this._closeClickHandler);
  };

  Contact.prototype._closeClickHandler = function(e) {
    e.preventDefault();
    return this.hide();
  };

  Contact.prototype.hide = function() {
    if (!this._opened) {
      return;
    }
    this._opened = false;
    this._$btClose.unbind();
    TweenLite.to(this._$base, .3, {
      autoAlpha: 0,
      y: 100,
      delay: .025,
      ease: Cubic.easeOut,
      onComplete: this._onHideComplete
    });
    return TweenLite.to(this._$main, .4, {
      bottom: "0",
      ease: Cubic.easeOut
    });
  };

  Contact.prototype._onHideComplete = function() {
    TweenLite.set(this._$base, {
      autoAlpha: 0
    });
    return this._$base.css("display", "none");
  };

  return Contact;

})();

var Gallery,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Gallery = (function() {
  Gallery.prototype._$base = null;

  Gallery.prototype._$layer = null;

  Gallery.prototype._$btClose = null;

  Gallery.prototype._opened = false;

  function Gallery() {
    this._closeClickHandler = __bind(this._closeClickHandler, this);
    this._$base = $("#gallery");
    this._$layer = $("#layer");
    this._$btClose = $("#bt_close_gallery");
  }

  Gallery.prototype.show = function() {
    if (this._opened) {
      return;
    }
    this._opened = true;
    this._$base.css("display", "block");
    this._$layer.css("display", "block");
    return this._$btClose.click(this._closeClickHandler);
  };

  Gallery.prototype._closeClickHandler = function(e) {
    e.preventDefault();
    return this.hide();
  };

  Gallery.prototype.hide = function() {
    if (!this._opened) {
      return;
    }
    this._opened = false;
    this._$base.css("display", "none");
    return this._$layer.css("display", "none");
  };

  return Gallery;

})();

var Background;

Background = (function() {
  Background.prototype._$background = null;

  Background.prototype._$background_sky = null;

  Background.prototype._$background_ground = null;

  Background.prototype._$lines = null;

  Background.prototype._heights = null;

  Background.prototype._speeds = null;

  Background.prototype._delays = null;

  function Background() {
    var $line, line, _i, _len, _ref;
    this._$background = $("#background");
    this._$background_sky = $("#background_sky");
    this._$background_ground = $("#background_ground");
    this._$lines = this._$background_sky.find(".background__line");
    this._heights = [];
    _ref = this._$lines;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      line = _ref[_i];
      $line = $(line);
      this._heights.push($line.height());
      $line.height(0);
    }
    this._$background_ground.css("bottom", "-130px");
    this._$background_sky.css("bottom", "-300px");
  }

  Background.prototype.show = function(delay) {
    return this._showLines(delay);
  };

  Background.prototype._showLines = function(delay) {
    var idx, line, ratio, speed, _i, _len, _ref;
    this._speeds = [6, 4, 3, 2.8, 2.7, 2.5, 2.3];
    this._delays = [0, 2, 3, 3.5, 4, 4.15, 4.35];
    ratio = .25;
    idx = 0;
    speed = 1;
    _ref = this._$lines;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      line = _ref[_i];
      TweenLite.to(line, this._speeds[idx] * ratio, {
        height: this._heights[idx] + "px",
        delay: this._delays[idx] * ratio + delay,
        ease: Quad.easeOut
      });
      idx++;
    }
    TweenLite.to(this._$background_sky, 5.5 * ratio, {
      bottom: 0,
      delay: delay
    });
    return TweenLite.to(this._$background_ground, 4 * ratio, {
      bottom: 0,
      delay: 3 * ratio + delay,
      ease: Quad.easeOut
    });
  };

  return Background;

})();

var Content, PreviewWorld;

Content = (function() {
  Content.prototype._$logoTitle = null;

  Content.prototype._$logoIcon = null;

  Content.prototype._$separatorDots = null;

  Content.prototype._$title = null;

  Content.prototype._$subtitle = null;

  Content.prototype._$credits = null;

  Content.prototype._$separatorHorizontal = null;

  Content.prototype._previewWorld = null;

  function Content() {
    this._$logoTitle = $("#logo_title");
    this._$logoIcon = $("#logo_icon");
    this._$separatorDots = $("#content_separator_dots");
    this._$title = $("#content_description_title");
    this._$subtitle = $("#content_description_subtitle");
    this._$credits = $("#content_description_credits");
    this._$separatorHorizontal = $("#content_separator_horizontal");
    this._previewWorld = new PreviewWorld();
    TweenLite.set(this._$logoTitle, {
      autoAlpha: 0,
      y: -20
    });
    TweenLite.set(this._$logoIcon, {
      autoAlpha: 0,
      y: 20
    });
    this._$logoIcon.css({
      opacity: 0
    });
    this._$separatorDots.css({
      opacity: 0
    });
    this._$title.css({
      opacity: 0
    });
    this._$subtitle.css({
      opacity: 0
    });
    this._$credits.css({
      opacity: 0
    });
    this._$separatorHorizontal.css({
      opacity: 0
    });
  }

  Content.prototype.show = function() {
    TweenLite.to(this._$separatorDots, 3, {
      autoAlpha: 1,
      delay: .2,
      ease: Quad.easeOut
    });
    TweenLite.to(this._$title, 3, {
      autoAlpha: 1,
      delay: .2,
      ease: Quad.easeOut
    });
    TweenLite.to(this._$subtitle, 3, {
      autoAlpha: 1,
      delay: 1.25,
      ease: Quad.easeOut
    });
    TweenLite.to(this._$credits, 3, {
      autoAlpha: 1,
      delay: 2.3,
      ease: Quad.easeOut
    });
    TweenLite.to(this._$separatorHorizontal, .4, {
      autoAlpha: 1,
      delay: 4.4
    });
    TweenLite.to(this._$logoIcon, .8, {
      autoAlpha: 1,
      y: 0,
      delay: 4.05
    });
    TweenLite.to(this._$logoTitle, .8, {
      autoAlpha: 1,
      y: 0,
      delay: 4.15
    });
    return this._previewWorld.show(4.5);
  };

  return Content;

})();

PreviewWorld = (function() {
  PreviewWorld.prototype._$banner = null;

  PreviewWorld.prototype._$bannerTitle = null;

  PreviewWorld.prototype._$bt = null;

  function PreviewWorld() {
    this._$banner = $("#preview_world_banner");
    this._$bannerTitle = this._$banner.find("span");
    this._$bt = $("#preview_world_bt");
    TweenLite.set(this._$banner, {
      autoAlpha: 0,
      scaleX: .8
    });
    TweenLite.set(this._$bannerTitle, {
      autoAlpha: 0
    });
    TweenLite.set(this._$bt, {
      autoAlpha: 0,
      y: -10
    });
  }

  PreviewWorld.prototype.show = function(delay) {
    TweenLite.to(this._$banner, .4, {
      autoAlpha: 1,
      scaleX: 1,
      delay: delay,
      ease: Back.easeOut
    });
    TweenLite.to(this._$bannerTitle, .25, {
      autoAlpha: 1,
      delay: delay + .3
    });
    return TweenLite.to(this._$bt, .4, {
      autoAlpha: 1,
      y: 0,
      delay: delay + .2
    });
  };

  return PreviewWorld;

})();

var Clouds, Landscape;

Landscape = (function() {
  Landscape.prototype._clouds = null;

  Landscape.prototype._$human = null;

  Landscape.prototype._$selector = null;

  Landscape.prototype._$dog = null;

  Landscape.prototype._$tree = null;

  Landscape.prototype._$fenceLeft = null;

  Landscape.prototype._$fenceRight = null;

  function Landscape() {
    this._clouds = new Clouds();
    this._$human = $("#character_human");
    this._$selector = $("#selector_human");
    this._$dog = $("#character_dog");
    this._$tree = $("#tree");
    this._$fenceLeft = $("#fence_left");
    this._$fenceRight = $("#fence_right");
    TweenLite.set(this._$human, {
      autoAlpha: 0,
      y: 25
    });
    TweenLite.set(this._$selector, {
      autoAlpha: 0,
      y: -10
    });
    TweenLite.set(this._$dog, {
      autoAlpha: 0,
      y: 25
    });
    TweenLite.set(this._$tree, {
      autoAlpha: 0,
      y: 25
    });
    TweenLite.set(this._$fenceLeft, {
      autoAlpha: 0,
      y: 15
    });
    TweenLite.set(this._$fenceRight, {
      autoAlpha: 0,
      y: 15
    });
  }

  Landscape.prototype.show = function(delay) {
    this._clouds.show(delay);
    TweenLite.to(this._$human, .5, {
      autoAlpha: 1,
      y: 0,
      delay: delay + .145,
      ease: Cubic.easeOut
    });
    TweenLite.to(this._$selector, .5, {
      autoAlpha: 1,
      y: 0,
      delay: delay + .345,
      ease: Back.easeOut
    });
    TweenLite.to(this._$dog, .5, {
      autoAlpha: 1,
      y: 0,
      delay: delay + .13,
      ease: Cubic.easeOut
    });
    TweenLite.to(this._$tree, .5, {
      autoAlpha: 1,
      y: 0,
      delay: delay + .15,
      ease: Cubic.easeOut
    });
    TweenLite.to(this._$fenceLeft, .5, {
      autoAlpha: 1,
      y: 0,
      delay: delay + .145,
      ease: Cubic.easeOut
    });
    TweenLite.to(this._$fenceRight, .5, {
      autoAlpha: 1,
      y: 0,
      delay: delay + .145,
      ease: Cubic.easeOut
    });
    return delay += .1;
  };

  return Landscape;

})();

Clouds = (function() {
  Clouds.prototype._$clouds = null;

  Clouds.prototype._$cloudLeft0 = null;

  Clouds.prototype._$cloudLeft1 = null;

  Clouds.prototype._$cloudRight0 = null;

  Clouds.prototype._$cloudRight1 = null;

  Clouds.prototype._$cloudRight2 = null;

  function Clouds() {
    this._$clouds = $("#clouds");
    this._$cloudLeft0 = this._$clouds.find(".landscape__cloud--cloud3");
    this._$cloudLeft1 = this._$clouds.find(".landscape__cloud--cloud2");
    this._$cloudRight0 = this._$clouds.find(".landscape__cloud--cloud0");
    this._$cloudRight1 = this._$clouds.find(".landscape__cloud--cloud4");
    this._$cloudRight2 = this._$clouds.find(".landscape__cloud--cloud1");
    TweenLite.set(this._$cloudLeft0, {
      x: 20,
      autoAlpha: 0
    });
    TweenLite.set(this._$cloudLeft1, {
      x: 20,
      autoAlpha: 0
    });
    TweenLite.set(this._$cloudRight0, {
      x: -20,
      autoAlpha: 0
    });
    TweenLite.set(this._$cloudRight1, {
      x: -20,
      autoAlpha: 0
    });
    TweenLite.set(this._$cloudRight2, {
      x: -20,
      autoAlpha: 0
    });
  }

  Clouds.prototype.show = function(delay) {
    TweenLite.to(this._$cloudLeft0, .5, {
      x: 0,
      autoAlpha: 1,
      delay: delay
    });
    TweenLite.to(this._$cloudLeft1, .5, {
      x: 0,
      autoAlpha: 1,
      delay: delay + .1
    });
    TweenLite.to(this._$cloudRight0, .5, {
      x: 0,
      autoAlpha: 1,
      delay: delay + .05
    });
    TweenLite.to(this._$cloudRight1, .5, {
      x: 0,
      autoAlpha: 1,
      delay: delay + .15
    });
    return TweenLite.to(this._$cloudRight2, .5, {
      x: 0,
      autoAlpha: 1,
      delay: delay + .075
    });
  };

  return Clouds;

})();

var Main,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

$(function() {
  var main;
  main = new Main();
  return main.show();
});

Main = (function() {
  Main.prototype._background = null;

  Main.prototype._landscape = null;

  Main.prototype._content = null;

  Main.prototype._menu = null;

  Main.prototype._gallery = null;

  Main.prototype._contact = null;

  Main.prototype._currentModule = null;

  function Main() {
    this._onContact = __bind(this._onContact, this);
    this._onGallery = __bind(this._onGallery, this);
    this._onAbout = __bind(this._onAbout, this);
    $("#btMenuAbout").click(this._onAbout);
    $("#btMenuGallery").click(this._onGallery);
    $("#btMenuContact").click(this._onContact);
    this._background = new Background();
    this._landscape = new Landscape();
    this._content = new Content();
    this._menu = new Menu();
    this._gallery = new Gallery();
    this._contact = new Contact();
  }

  Main.prototype.show = function() {
    this._content.show();
    this._background.show(3);
    this._landscape.show(4.25);
    return this._menu.show(4.3);
  };

  Main.prototype._onAbout = function(e) {
    e.preventDefault();
    return this._hideCurrentModule();
  };

  Main.prototype._onGallery = function(e) {
    if (this._currentModule === this.gallery) {
      return;
    }
    e.preventDefault();
    this._hideCurrentModule();
    this._gallery.show();
    return this._currentModule = this._gallery;
  };

  Main.prototype._onContact = function(e) {
    if (this._currentModule === this._contact && this._currentModule._opened) {
      return;
    }
    e.preventDefault();
    this._hideCurrentModule();
    this._contact.show();
    return this._currentModule = this._contact;
  };

  Main.prototype._hideCurrentModule = function() {
    if (!this._currentModule) {
      return;
    }
    return this._currentModule.hide();
  };

  return Main;

})();

var Menu;

Menu = (function() {
  Menu.prototype._$menu = null;

  Menu.prototype._$links = null;

  function Menu() {
    var link, _i, _len, _ref;
    this._$menu = $("#menu");
    this._$links = this._$menu.find("a");
    TweenLite.set(this._$menu, {
      autoAlpha: 0,
      y: 30
    });
    _ref = this._$links;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      link = _ref[_i];
      TweenLite.set(link, {
        autoAlpha: 0,
        y: 20
      });
    }
  }

  Menu.prototype.show = function(delay) {
    var d, link, _i, _len, _ref, _results;
    TweenLite.to(this._$menu, .6, {
      autoAlpha: 1,
      y: 0,
      delay: delay,
      ease: Cubic.easeOut
    });
    d = 0;
    _ref = this._$links;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      link = _ref[_i];
      TweenLite.to(link, .6, {
        autoAlpha: 1,
        y: 0,
        delay: delay + .1 + d,
        ease: Quad.easeOut
      });
      _results.push(d += .075);
    }
    return _results;
  };

  return Menu;

})();
